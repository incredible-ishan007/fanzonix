<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous">
        </script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
        integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>
        function showPrev(fileRef, prevRef) {
            const [file] = fileRef.files
            if (file) {
                prevRef.src = URL.createObjectURL(file)
            }
        }

    </script>
    <script>
        function showUser() {

            let activeUser = localStorage.getItem("activeUser");
            document.getElementById("txtEmail3").value = activeUser
        }



    </script>
    <style>
        #prev {
            transform: translate(650px, -50px);
        }

        #txtInfo3 {
            transform: translateY(-50px);
        }

        #gridCheck3 {
            transform: translateY(-50px);
        }
    </style>

    <script>
        $(document).ready(function () {
            $("#searchAjax").click(function () {

                let obj = {
                    type: "get",
                    url: "/search",
                    data: {
                        txtEmail3: $("#txtEmail3").val()
                    }
                }


                $.ajax(obj).then(
                    function (responseJsonAry) {

                        let org_name3 = responseJsonAry[0].org_name3;
                        let registeration_num3 = responseJsonAry[0].registeration_num3;
                        let address3 = responseJsonAry[0].address3;
                        let city3 = responseJsonAry[0].city3;
                        let sports3 = responseJsonAry[0].sports3;
                        let website3 = responseJsonAry[0].website3;
                        let insta3 = responseJsonAry[0].insta3;
                        let head3 = responseJsonAry[0].head3;
                        let contact3 = responseJsonAry[0].contact3;
                        let other_info3 = responseJsonAry[0].other_info3;
                        let picurl3 = responseJsonAry[0].picurl3;



                        $("#txtName3").val(org_name3);
                        $("#txtRNum3").val(registeration_num3);
                        $("#txtAdd3").val(address3);
                        $("#txtCity3").val(city3);
                        $("#txtSports3").val(sports3);
                        $("#txtWeb3").val(website3);
                        $("#txtInsta3").val(insta3);
                        $("#txtHead3").val(head3);
                        $("#txtCNum3").val(contact3);
                        $("#txtInfo3").val(other_info3);
                        $("#prev").prop("src", picurl3);






                    }).fail(function (err) { alert(err.message) })
            })
        })

    </script>
    <!-- <script>
        function doreg() {
            localStorage.setItem("regnum", $("#txtRNum3").val());

        }
    </script> -->

</head>

<body onload="showUser()">
    <div class="container"  style="margin-top: 40px;">
        <div class="col-md-8 offset-md-2">
            <form class="row g-3 " method="post" enctype="multipart/form-data" action="/SendServer"
                style="box-shadow: 0px 0px 5px .5px black; margin-bottom: 40px;">
                 <div class="col-md-12   " style="color:red">
                    <center>
                        <h2>Organisation Detail</h2>
                    </center>
                </div>

                <div class="col-md-8">
                    <label for="txtEmail3" class="form-label">Email</label>
                    <input type="text" class="form-control" id="txtEmail3" name="txtEmail3" readonly>
                </div>
                <div class="col-md-4  ">
                    <button type="button" class="btn btn-primary" id="searchAjax"
                        style="margin-top: 32px; margin-left: 65px; width: 150px;">Search</button>
                </div>
                <div class="col-md-8">
                    <label for="txtName3" class="form-label">ORganisation Name</label>
                    <input type="text" class="form-control" name="txtName3" id="txtName3">
                </div>
                <div class="col-md-4">
                    <label for="txtRNum3" class="form-label">Registeration Number</label>
                    <input type="text" class="form-control" name="txtRNum3" id="txtRNum3">
                </div>
                <div class="col-8">
                    <label for="txtAdd3" class="form-label">Address</label>
                    <input type="text" class="form-control" name="txtAdd3" id="txtAdd3" placeholder="Address">
                </div>
                <div class="col-md-4">
                    <label for="txtCity3" class="form-label">City</label>
                    <input type="text" class="form-control" name="txtCity3" id="txtCity3">
                </div>
                <div class="col-12">
                    <label for="txtSports3" class="form-label">Deals in Sports</label>
                    <input type="text" class="form-control" name="txtSports3" id="txtSports3"
                        placeholder="eg cricket,football">
                </div>
                <div class="col-6">
                    <label for="txtWeb3" class="form-label">Website</label>
                    <input type="text" class="form-control" name="txtWeb3" id="txtWeb3">
                </div>
                <div class="col-6">
                    <label for="txtInsta3" class="form-label">Insta Handle</label>
                    <input type="text" class="form-control" name="txtInsta3" id="txtInsta3">
                </div>
                <div class="col-8">
                    <label for="txtHead3" class="form-label">Organisation Head</label>
                    <input type="text" class="form-control" name="txtHead3" id="txtHead3">
                </div>
                <div class="col-md-4">
                    <label for="txtCNum3" class="form-label">Contact Number</label>
                    <input type="text" class="form-control" name="txtCNum3" id="txtCNum3">
                </div>

                <div class="mb-3 ">
                    <label for="profilePic" class="form-label" style="display: block;">Registeration certificate
                        Pic</label>
                    <input class="form-control" type="file" name="profilePic" id="profilePic"
                        onchange="showPrev(profilePic,prev)" style="width: 570px;">
                    <img src="" width="150" height="150" id="prev" alt="">
                </div>
                <div class="col-12">
                    <label for="txtInfo3" class="form-label" style="transform: translateY(-50px);">Other
                        Information</label>
                    <input type="text" class="form-control" id="txtInfo3" name="txtInfo3" placeholder="1234 Main St">
                </div>



                <div class="col-12">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="gridCheck3">
                        <label class="form-check-label" for="gridCheck3" style="transform: translateY(-50px);">
                            Check me out
                        </label>
                    </div>
                </div>
                <div class="col-12">
                    <center>
                        <input type="submit" class="btn btn-primary" style="transform: translateY(-50px);"
                            formaction="/SendServer" value="Send to Server" onclick="doreg()">

                        <input type="submit" class="btn btn-danger" style="transform: translateY(-50px); "
                            formaction="/modify" value="Modify">

                    </center>
                </div>


            </form>
        </div>

    </div>
</body>

</html>